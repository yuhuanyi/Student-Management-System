{% extends "layout.html" %}

{# 定义页面内容区块 #}
{% block content %}

{# 仪表板主容器 - 包含所有仪表板内容 #}
<div class="dashboard"
     style="
        background-color: white;  /* 白色背景 */
        padding: 30px;            /* 30像素内边距 */
        border-radius: 10px;      /* 10像素圆角 */
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);  /* 淡灰色阴影效果 */
        margin-top: 20px;         /* 顶部20像素外边距 */
     ">

    {# 欢迎区域 - 显示系统欢迎信息 #}
    <div class="welcome"
         style="
            text-align: center;   /* 居中对齐 */
            margin-bottom: 30px;  /* 底部30像素外边距 */
         ">
        <h2 style="color: #333;">
            <i class="fas fa-graduation-cap"></i>
            欢迎使用校园综合管理系统
        </h2>
        <p style="color: #666;">
            本系统提供学生管理、课程管理、成绩管理和数据分析功能
        </p>
    </div>

    {# 统计卡片区域 - 包含三个关键指标卡片 #}
    <div class="stats"
         style="
            display: grid;                     /* 使用网格布局 */
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); /* 自适应列 */
            gap: 20px;                         /* 卡片间距20像素 */
            margin-bottom: 30px;                /* 底部30像素外边距 */
         ">

        {# 学生总数卡片 #}
        <div class="stat-card"
             style="
                background-color: white;       /* 白色背景 */
                border-radius: 8px;            /* 8像素圆角 */
                padding: 20px;                 /* 20像素内边距 */
                text-align: center;            /* 内容居中对齐 */
                box-shadow: 0 4px 6px rgba(0,0,0,0.1); /* 与仪表板一致的阴影效果 */
                transition: transform 0.3s ease;  /* 添加悬停动画效果 */
             ">
            <div class="stat-icon">
                {# 用户图标，使用蓝色 #}
                <i class="fas fa-users" style="font-size: 2.5rem; color: #3498db;"></i>
            </div>
            <div class="stat-info">
                {# 显示学生总数（从后端传入） #}
                <h3 style="margin: 10px 0; font-size: 2rem; color: #2c3e50;">
                    {{ student_count }}
                </h3>
                <p style="color: #7f8c8d; margin: 0;">学生总数</p>
            </div>
        </div>

        {# 课程总数卡片 #}
        <div class="stat-card"
             style="background-color: white; border-radius: 8px; padding: 20px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
            <div class="stat-icon">
                {# 书本图标，使用蓝色 #}
                <i class="fas fa-book" style="font-size: 2.5rem; color: #3498db;"></i>
            </div>
            <div class="stat-info">
                {# 显示课程总数（从后端传入） #}
                <h3 style="margin: 10px 0; font-size: 2rem; color: #2c3e50;">
                    {{ course_count }}
                </h3>
                <p style="color: #7f8c8d; margin: 0;">课程总数</p>
            </div>
        </div>

        {# 成绩记录卡片 #}
        <div class="stat-card"
             style="background-color: white; border-radius: 8px; padding: 20px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
            <div class="stat-icon">
                {# 图表图标，使用蓝色 #}
                <i class="fas fa-chart-line" style="font-size: 2.5rem; color: #3498db;"></i>
            </div>
            <div class="stat-info">
                {# 显示成绩记录总数（从后端传入） #}
                <h3 style="margin: 10px 0; font-size: 2rem; color: #2c3e50;">
                    {{ score_count }}
                </h3>
                <p style="color: #7f8c8d; margin: 0;">成绩记录</p>
            </div>
        </div>
    </div>

    {# 最近添加的学生列表 #}
    <div class="recent-students"
         style="
            margin-top: 30px;          /* 顶部30像素外边距 */
            overflow: auto;            /* 添加滚动条（如果需要） */
         ">
        <h3 style="color: #333;">
            <i class="fas fa-user-clock"></i>
            最近添加的学生
        </h3>

        {# 学生信息表格 #}
        <table class="table"
               style="
                  width: 100%;             /* 100%宽度 */
                  margin-top: 15px;        /* 顶部15像素外边距 */
                  border-collapse: collapse; /* 边框合并模式 */
               ">
            <thead>
                <tr style="background-color: #f8f9fa;">
                    <th style="padding: 12px 15px; text-align: left;">学号</th>
                    <th style="padding: 12px 15px; text-align: left;">姓名</th>
                    <th style="padding: 12px 15px; text-align: left;">专业</th>
                    <th style="padding: 12px 15px; text-align: left;">班级</th>
                </tr>
            </thead>
            <tbody>
                {# 循环显示最近添加的学生（从后端传入） #}
                {% for student in recent_students %}
                <tr style="border-bottom: 1px solid #e9ecef;">
                    <td style="padding: 12px 15px;">{{ student.student_id }}</td>
                    <td style="padding: 12px 15px;">{{ student.name }}</td>
                    <td style="padding: 12px 15px;">{{ student.major }}</td>
                    <td style="padding: 12px 15px;">{{ student.class_ }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {# 快速操作区域 #}
    <div class="quick-actions"
         style="
            margin-top: 30px;      /* 顶部30像素外边距 */
         ">
        <h3 style="color: #333;">
            <i class="fas fa-bolt"></i>
            快速操作
        </h3>

        {# 操作按钮容器 #}
        <div class="actions"
             style="
                display: flex;             /* Flex布局 */
                gap: 20px;                 /* 按钮间距20像素 */
                margin-top: 20px;          /* 顶部20像素外边距 */
                flex-wrap: wrap;           /* 允许换行 */
             ">

            {# 添加学生按钮 #}
            <a href="{{ url_for('main.student_add') }}"
               class="action-btn"
               style="
                  background-color: #3498db; /* 蓝色背景 */
                  color: white;            /* 白色文本 */
                  padding: 10px 20px;       /* 内边距 */
                  border-radius: 4px;       /* 圆角 */
                  text-decoration: none;    /* 无下划线 */
                  transition: background-color 0.3s ease; /* 悬停动画效果 */
                  display: inline-flex;      /* 内联Flex布局 */
                  align-items: center;       /* 垂直居中对齐 */
                  gap: 8px;                 /* 图标和文本间距 */
               ">
                <i class="fas fa-user-plus"></i> 添加学生
            </a>

            {# 添加课程按钮 #}
            <a href="{{ url_for('main.course_add') }}"
               class="action-btn"
               style="background-color: #3498db; color: white; padding: 10px 20px; border-radius: 4px; text-decoration: none; transition: background-color 0.3s ease; display: inline-flex; align-items: center; gap: 8px;">
                <i class="fas fa-book-medical"></i> 添加课程
            </a>

            {# 录入成绩按钮 #}
            <a href="{{ url_for('main.score_input') }}"
               class="action-btn"
               style="background-color: #3498db; color: white; padding: 10px 20px; border-radius: 4px; text-decoration: none; transition: background-color 0.3s ease; display: inline-flex; align-items: center; gap: 8px;">
                <i class="fas fa-pen"></i> 录入成绩
            </a>

            {# 查看分析按钮 #}
            <a href="{{ url_for('main.visualization') }}"
               class="action-btn"
               style="background-color: #3498db; color: white; padding: 10px 20px; border-radius: 4px; text-decoration: none; transition: background-color 0.3s ease; display: inline-flex; align-items: center; gap: 8px;">
                <i class="fas fa-chart-pie"></i> 查看分析
            </a>
        </div>
    </div>
</div>
{% endblock %}